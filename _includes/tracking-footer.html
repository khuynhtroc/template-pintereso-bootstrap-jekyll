<!-- All this area goes before </body> closing tag --> 
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
    const SUPABASE_URL = 'https://tcokskeplxyrokjjusmm.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRjb2tza2VwbHh5cm9ramp1c21tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTEzMDYsImV4cCI6MjA3NDM4NzMwNn0.qtXdDLfaTqUUBql4jTmLieYGOwzNHif-vEMdlAYCiso';
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
</script>

<script src="{{ '/assets/js/config.supabase.js' | relative_url }}"></script>
<script type="module" src="{{ '/assets/js/auth-modal.js' | relative_url }}"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  var btn = document.getElementById('downloadBtn');
  if (!btn) return;
  btn.addEventListener('click', function(e) {
    e.preventDefault();

    // Giả sử window.currentUser có các trường: isLoggedIn: Boolean, isVip: Boolean
    if(!window.currentUser || !window.currentUser.isLoggedIn) {
      $('#authModal').modal('show'); // dùng bootstrap modal
      return false;
    }

    // Nếu cần check VIP:
    if(btn.dataset.requiresVip === "true" && !window.currentUser.isVip) {
      alert('Bạn cần nâng cấp gói thành viên VIP để tải file này!');
      return false;
    }

    // Đủ quyền thì mở link download
    window.open(btn.dataset.downloadUrl, '_blank');
  });
});
</script>


<!-- AddThis, replace this with your own code from https://www.addthis.com/ --> 
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b15193f169714ca"></script>


<!-- Pinterest Script, nothing for you to replace here  --> 
<script async defer src="//assets.pinterest.com/js/pinit.js"></script>

<!-- Cookie Consent, nothing for you to replace here. Remove it if you want  -->
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#f5d948"
    }
  },
  "position": "bottom-left",
  "content": {
    "href": "{{site.url}}{{site.baseurl}}/privacy-policy.html"
  }
})});
</script>