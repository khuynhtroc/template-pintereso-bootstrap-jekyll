---
layout: default
title: Thanh toán
permalink: /checkout/
---

<div class="container py-5">
  <div class="text-center mb-5">
    <h1 class="display-5 fw-bold">THANH TOÁN</h1>
  </div>

  <div class="row g-5">
    <!-- Cột thông tin đơn hàng và thanh toán -->
    <div class="col-md-5 col-lg-4 order-md-last">
      <h4 class="d-flex justify-content-between align-items-center mb-3">
        <span class="text-primary">Đơn hàng của bạn</span>
      </h4>
      <div id="order-summary-container">
        <!-- JS sẽ chèn nội dung tóm tắt đơn hàng vào đây -->
      </div>
      
      <!-- PHẦN MÃ GIẢM GIÁ -->
      <div class="card my-4">
        <div class="card-body">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Mã giảm giá" id="voucher-code">
                <button class="btn btn-secondary" type="button" id="apply-voucher-btn">Áp dụng</button>
            </div>
            <div id="voucher-message" class="mt-2 small"></div>
        </div>
      </div>
      
      <!-- PHẦN CHỌN PHƯƠNG THỨC THANH TOÁN -->
      <div id="payment-methods-container">
        <h4 class="mb-3">Phương thức thanh toán</h4>
        <div class="my-3">
          <div class="form-check">
            <input id="bank_transfer" name="paymentMethod" type="radio" class="form-check-input" required value="bank_transfer" checked>
            <label class="form-check-label" for="bank_transfer">Chuyển khoản Ngân hàng</label>
          </div>
          <div class="form-check">
            <input id="paypal" name="paymentMethod" type="radio" class="form-check-input" required value="paypal">
            <label class="form-check-label" for="paypal">PayPal</label>
          </div>
          <div class="form-check">
            <input id="stripe" name="paymentMethod" type="radio" class="form-check-input" required value="stripe">
            <label class="form-check-label" for="stripe">Stripe (Thẻ tín dụng/ghi nợ)</label>
          </div>
        </div>
        <div id="payment-details" class="text-muted small p-3 bg-light rounded">
          <!-- JS sẽ chèn nội dung chi tiết cho từng phương thức vào đây -->
        </div>
      </div>

    </div>

    <!-- Cột thông tin khách hàng và nút đặt hàng -->
    <div class="col-md-7 col-lg-8">
      <h4 class="mb-3">Thông tin tài khoản</h4>
      
      <!-- Hiển thị khi đã đăng nhập -->
      <div id="user-logged-in" class="alert alert-success" style="display: none;">
        Chào mừng trở lại, <strong id="user-email-display"></strong>! Bạn có thể tiến hành đặt hàng.
        <a href="#" id="logout-button" class="float-end">Đăng xuất</a>
      </div>

      <!-- Hiển thị khi chưa đăng nhập -->
      <div id="user-logged-out" style="display: none;">
        <p>Bạn đã có tài khoản? <a href="#" id="checkout-login-link">Đăng nhập</a> để thanh toán nhanh hơn.</p>
        <form class="needs-validation" id="checkout-form" novalidate>
          <p>Thông tin dưới đây sẽ được dùng để tạo tài khoản mới cho bạn.</p>
          <div class="row g-3">
            <div class="col-12"><label for="email" class="form-label">Địa chỉ email (*)</label><input type="email" class="form-control" id="email" required></div>
            <div class="col-12"><label for="password" class="form-label">Mật khẩu (*)</label><input type="password" class="form-control" id="password" required></div>
          </div>
        </form>
      </div>

      <hr class="my-4">
      
      <div id="checkout-action-container">
        <div class="d-grid">
           <button class="btn btn-primary btn-lg" id="place-order-btn" type="button">Đặt hàng</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ '/assets/js/checkout.js' | relative_url }}"></script>
